(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[417],{3516:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/memo",function(){return t(6473)}])},6473:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return h}});var i=t(1527),s=t(7888),c=t.n(s),l=t(5996),r=t(959),a=t(8163),o=t(6292),d=t(4387),u=t(4127),f=t(278),m=t(9451),x=t(2326),v=t(4251),p=t(8887);function h(){var e;let n=(0,l.useRouter)(),t=(0,r.useRef)(null),{data:s}=(0,m.WE)({queryFn:d.B.checkLogin}),h=Number(n.query.memoId)||0,{increaseFontSize:_,decreaseFontSize:E,loadFontSizeFromStorage:j}=(0,v.v)();(0,r.useEffect)(()=>{j()},[j]);let{allMemos:k,setMemo:z}=(0,x._)(),[N,y]=(0,r.useState)(!1),{memoHistories:b,currentIndex:g,backHistory:C,nextHistory:w,resetHistory:D,pushHistory:A}=(0,p.$)(),{data:F,isError:T,isFetching:Y}=(0,m.WE)({queryFn:o.n.getMemo,payload:h,options:{enabled:!!(s&&h>0)}});(0,r.useEffect)(()=>{F&&h&&h>0?(z(F),A(F.text||"")):F&&0===h&&y(!0)},[F,h,z,A]);let q=null==k?void 0:k.find(e=>e.memoId===h),I=null==q?void 0:null===(e=q.text)||void 0===e?void 0:e.split("\n")[0].slice(0,50);return(0,r.useEffect)(()=>{void 0!==b[g]&&z({memoId:h,text:b[g],editedAt:c()().format("YYYY-MM-DD HH:mm"),createdAt:null==q?void 0:q.createdAt})},[g,b,h,z,null==q?void 0:q.createdAt]),(0,r.useEffect)(()=>()=>{D()},[D]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.Z,{title:I,backButtonSize:24,onTitleClick:()=>{var e;null===(e=t.current)||void 0===e||e.scrollTo(0,0)}}),(0,i.jsx)("div",{className:"h-[calc(100dvh-60px-env(safe-area-inset-bottom))] px-[15px] pb-[15px] flex flex-col items-center gap-[10px]",children:T||s&&N?(0,i.jsx)("div",{className:"text-center",children:"메모 불러오기 실패 \uD83D\uDE25"}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"flex items-center gap-[10px] pt-[10px]",children:[(0,i.jsx)(a.z,{onClick:_,size:"sm",variant:"secondary",children:"글씨+"}),(0,i.jsx)(a.z,{onClick:E,size:"sm",variant:"secondary",children:"글씨-"}),(0,i.jsx)(a.z,{onClick:C,size:"sm",variant:"secondary",children:"뒤로"}),(0,i.jsx)(a.z,{onClick:w,size:"sm",variant:"secondary",children:"앞으로"})]}),(0,i.jsx)(f._,{memoId:h||0,fetching:!!s&&Y,ref:t})]})})]})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=3516)}),_N_E=e.O()}]);